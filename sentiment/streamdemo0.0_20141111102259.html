<?php

require 'facebook/src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
    'appId'  => '770707736335720',
    'secret' => '15d79634f7b439545f0d60328dea3998',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');

    } catch (FacebookApiException $e) {

        error_log($e);
        $user = null;
    }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl();
}


?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Facebook test demo</title>
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body  style="background:#f6fed2 !important;">

<body>
<h1>Sample web app using facebook php SDK </h1>

<?php if ($user): ?>
<a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php else: ?>
<div>
    Check the login status using OAuth 2.0 handled by the PHP SDK:
    <a href="<?php echo $statusUrl; ?>">Check the login status</a>
</div>
<div>
    Login using OAuth 2.0 handled by the PHP SDK:
    <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
</div>
<?php endif ?>

<h3>PHP Session</h3>
<pre><?php print_r($_SESSION); ?></pre>

<?php if ($user): ?>
<h3> Welcome <?php  echo $user_profile['name']; ?> !!! </h3>
<img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

<h3>Your friend list Object is as follows (/me/friends?token=<?php echo $access_token; ?>)</h3>
<pre><?php print_r($user_friendList); ?></pre>
<?php else: ?>
<strong><em>You are not Connected.</em></strong>
<?php endif ?>
<div id="subcontainer">

     <form action="respond.php" method="get">     
        <textarea rows="20" cols="90" name="analyseText" value="analyseText">
            Enter the text you want to analyze here...</textarea>    <br> <br> <br>
        <input type="submit"  class="buttonClass" name="submit" value="submit">
    </form>


</div>

    <footer class="footer" style="color:#1f3952!important; text-align:center center; position:relative; bottom: 1px;"> @2014 by Stream Gao. ITP</footer>
</body>
</html>